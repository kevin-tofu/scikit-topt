

<!DOCTYPE html>
<html class="writer-html5" lang="en" data-content_root="./">
<head>
  <meta charset="utf-8" /><meta name="viewport" content="width=device-width, initial-scale=1" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Tutorial Page &mdash; scikit-topt 0.2.4 documentation</title>
      <link rel="stylesheet" type="text/css" href="_static/pygments.css?v=b86133f3" />
      <link rel="stylesheet" type="text/css" href="_static/css/theme.css?v=e59714d7" />

  
    <link rel="canonical" href="https://kevin-tofu.github.io/scikit-topt/tutorial.html" />
      <script src="_static/jquery.js?v=5d32c60e"></script>
      <script src="_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
      <script src="_static/documentation_options.js?v=6ffd866b"></script>
      <script src="_static/doctools.js?v=9bcbadda"></script>
      <script src="_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="_static/js/theme.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Topology Optimization Algorithm Overview" href="theory.html" />
    <link rel="prev" title="Installation" href="installation.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="index.html" class="icon icon-home">
            scikit-topt
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Content</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="installation.html">Installation</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Tutorial Page</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#optimization">Optimization</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#optimizer-configuration-and-run">Optimizer Configuration, and Run</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#task-definition">Task Definition</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#shape-modeling-and-its-basis-function">Shape modeling and its basis function</a></li>
<li class="toctree-l3"><a class="reference internal" href="#load-basis-from-model-file">Load Basis from Model File</a></li>
<li class="toctree-l3"><a class="reference internal" href="#task-configuration">Task Configuration</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#results-and-visualization">Results and Visualization</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#id1">Results and Visualization</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="theory.html">Topology Optimization Algorithm Overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="optimization.html">Optimization Algorithms in Density-Based Topology Optimization</a></li>
<li class="toctree-l1"><a class="reference internal" href="api.html">API Reference</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">scikit-topt</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="index.html" class="icon icon-home" aria-label="Home"></a></li>
      <li class="breadcrumb-item active">Tutorial Page</li>
      <li class="wy-breadcrumbs-aside">
            <a href="_sources/tutorial.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="tutorial-page">
<h1>Tutorial Page<a class="headerlink" href="#tutorial-page" title="Link to this heading"></a></h1>
<section id="optimization">
<h2>Optimization<a class="headerlink" href="#optimization" title="Link to this heading"></a></h2>
<p>Below is a minimal working example that performs a topology optimization.
This will run a compliance minimization with OC method.</p>
<section id="optimizer-configuration-and-run">
<h3>Optimizer Configuration, and Run<a class="headerlink" href="#optimizer-configuration-and-run" title="Link to this heading"></a></h3>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span><span class="w"> </span><span class="nn">sktopt</span>

<span class="n">cfg</span> <span class="o">=</span> <span class="n">sktopt</span><span class="o">.</span><span class="n">core</span><span class="o">.</span><span class="n">optimizers</span><span class="o">.</span><span class="n">LogMOC_Config</span><span class="p">(</span>
     <span class="n">vol_frac</span><span class="o">=</span><span class="mf">0.6</span><span class="p">,</span>
     <span class="n">max_iters</span><span class="o">=</span><span class="mi">40</span><span class="p">,</span>
     <span class="n">record_times</span><span class="o">=</span><span class="mi">40</span><span class="p">,</span>
     <span class="n">export_img</span><span class="o">=</span><span class="kc">True</span>
 <span class="p">)</span>
 <span class="n">optimizer</span> <span class="o">=</span> <span class="n">sktopt</span><span class="o">.</span><span class="n">core</span><span class="o">.</span><span class="n">LogMOC_Optimizer</span><span class="p">(</span><span class="n">cfg</span><span class="p">,</span> <span class="n">mytask</span><span class="p">)</span>
 <span class="n">optimizer</span><span class="o">.</span><span class="n">parameterize</span><span class="p">()</span>
 <span class="n">optimizer</span><span class="o">.</span><span class="n">optimize</span><span class="p">()</span>
</pre></div>
</div>
<p>But before running the optimization, we need to set up the task configuration and the design variables.</p>
</section>
</section>
<section id="task-definition">
<h2>Task Definition<a class="headerlink" href="#task-definition" title="Link to this heading"></a></h2>
<section id="shape-modeling-and-its-basis-function">
<h3>Shape modeling and its basis function<a class="headerlink" href="#shape-modeling-and-its-basis-function" title="Link to this heading"></a></h3>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span><span class="w"> </span><span class="nn">skfem</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">sktopt</span>

<span class="n">x_len</span> <span class="o">=</span> <span class="mf">8.0</span>
<span class="n">y_len</span> <span class="o">=</span> <span class="mf">8.0</span>
<span class="n">z_len</span> <span class="o">=</span> <span class="mf">1.0</span>
<span class="n">mesh_size</span> <span class="o">=</span> <span class="mf">0.2</span>

<span class="n">mesh</span> <span class="o">=</span> <span class="n">sktopt</span><span class="o">.</span><span class="n">mesh</span><span class="o">.</span><span class="n">toy_problem</span><span class="o">.</span><span class="n">create_box_hex</span><span class="p">(</span>
    <span class="n">x_len</span><span class="p">,</span> <span class="n">y_len</span><span class="p">,</span> <span class="n">z_len</span><span class="p">,</span> <span class="n">mesh_size</span>
<span class="p">)</span>
<span class="n">e</span> <span class="o">=</span> <span class="n">skfem</span><span class="o">.</span><span class="n">ElementVector</span><span class="p">(</span><span class="n">skfem</span><span class="o">.</span><span class="n">ElementHex1</span><span class="p">())</span>
<span class="n">basis</span> <span class="o">=</span> <span class="n">skfem</span><span class="o">.</span><span class="n">Basis</span><span class="p">(</span><span class="n">mesh</span><span class="p">,</span> <span class="n">e</span><span class="p">,</span> <span class="n">intorder</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span>
</pre></div>
</div>
</section>
<section id="load-basis-from-model-file">
<h3>Load Basis from Model File<a class="headerlink" href="#load-basis-from-model-file" title="Link to this heading"></a></h3>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span><span class="w"> </span><span class="nn">skfem</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">sktopt</span>

<span class="n">mesh_path</span> <span class="o">=</span> <span class="s2">&quot;./data/model.msh&quot;</span>
<span class="n">basis</span> <span class="o">=</span> <span class="n">sktopt</span><span class="o">.</span><span class="n">mesh</span><span class="o">.</span><span class="n">loader</span><span class="o">.</span><span class="n">basis_from_file</span><span class="p">(</span><span class="n">mesh_path</span><span class="p">,</span> <span class="n">intorder</span><span class="o">=</span><span class="mi">3</span><span class="p">)</span>
</pre></div>
</div>
</section>
<section id="task-configuration">
<h3>Task Configuration<a class="headerlink" href="#task-configuration" title="Link to this heading"></a></h3>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">dirichlet_nodes</span> <span class="o">=</span> <span class="n">sktopt</span><span class="o">.</span><span class="n">mesh</span><span class="o">.</span><span class="n">utils</span><span class="o">.</span><span class="n">get_nodes_indices_in_range</span><span class="p">(</span>
    <span class="n">basis</span><span class="o">.</span><span class="n">mesh</span><span class="p">,</span> <span class="p">(</span><span class="mf">0.0</span><span class="p">,</span> <span class="mf">0.05</span><span class="p">),</span> <span class="p">(</span><span class="mf">0.0</span><span class="p">,</span> <span class="n">y_len</span><span class="p">),</span> <span class="p">(</span><span class="mf">0.0</span><span class="p">,</span> <span class="n">z_len</span><span class="p">)</span>
<span class="p">)</span>
<span class="n">dirichlet_dir</span> <span class="o">=</span> <span class="s2">&quot;all&quot;</span>

<span class="n">F_nodes_0</span> <span class="o">=</span> <span class="n">sktopt</span><span class="o">.</span><span class="n">mesh</span><span class="o">.</span><span class="n">utils</span><span class="o">.</span><span class="n">get_nodes_indices_in_range</span><span class="p">(</span>
    <span class="n">basis</span><span class="o">.</span><span class="n">mesh</span><span class="p">,</span> <span class="p">(</span><span class="n">x_len</span><span class="p">,</span> <span class="n">x_len</span><span class="p">),</span> <span class="p">(</span><span class="n">y_len</span><span class="p">,</span> <span class="n">y_len</span><span class="p">),</span> <span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">z_len</span><span class="p">)</span>
<span class="p">)</span>
<span class="n">F_nodes_1</span> <span class="o">=</span> <span class="n">sktopt</span><span class="o">.</span><span class="n">mesh</span><span class="o">.</span><span class="n">utils</span><span class="o">.</span><span class="n">get_nodes_indices_in_range</span><span class="p">(</span>
    <span class="n">basis</span><span class="o">.</span><span class="n">mesh</span><span class="p">,</span> <span class="p">(</span><span class="n">x_len</span><span class="p">,</span> <span class="n">x_len</span><span class="p">),</span> <span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">),</span> <span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">z_len</span><span class="p">)</span>
<span class="p">)</span>
<span class="n">F_nodes</span> <span class="o">=</span> <span class="p">[</span><span class="n">F_nodes_0</span><span class="p">,</span> <span class="n">F_nodes_1</span><span class="p">]</span>
<span class="n">F_dir</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;u^2&quot;</span><span class="p">,</span> <span class="s2">&quot;u^2&quot;</span><span class="p">]</span>
<span class="n">F</span> <span class="o">=</span> <span class="p">[</span><span class="o">-</span><span class="mi">100</span><span class="p">,</span> <span class="mi">100</span><span class="p">]</span>
<span class="n">design_elements</span> <span class="o">=</span> <span class="n">sktopt</span><span class="o">.</span><span class="n">mesh</span><span class="o">.</span><span class="n">utils</span><span class="o">.</span><span class="n">get_elements_in_box</span><span class="p">(</span>
    <span class="n">mesh</span><span class="p">,</span>
    <span class="p">(</span><span class="mf">0.0</span><span class="p">,</span> <span class="n">x_len</span><span class="p">),</span> <span class="p">(</span><span class="mf">0.0</span><span class="p">,</span> <span class="n">y_len</span><span class="p">),</span> <span class="p">(</span><span class="mf">0.0</span><span class="p">,</span> <span class="n">z_len</span><span class="p">)</span>
<span class="p">)</span>

<span class="n">mytask</span> <span class="o">=</span> <span class="n">sktopt</span><span class="o">.</span><span class="n">mesh</span><span class="o">.</span><span class="n">task</span><span class="o">.</span><span class="n">TaskConfig</span><span class="o">.</span><span class="n">from_nodes</span><span class="p">(</span>
    <span class="n">E0</span><span class="p">,</span>
    <span class="n">nu</span><span class="p">,</span>
    <span class="n">basis</span><span class="p">,</span>
    <span class="n">dirichlet_nodes</span><span class="p">,</span>
    <span class="n">dirichlet_dir</span><span class="p">,</span>
    <span class="n">F_nodes</span><span class="p">,</span>
    <span class="n">F_dir</span><span class="p">,</span>
    <span class="n">F</span><span class="p">,</span>
    <span class="n">design_elements</span>
<span class="p">)</span>
</pre></div>
</div>
</section>
</section>
<section id="results-and-visualization">
<h2>Results and Visualization<a class="headerlink" href="#results-and-visualization" title="Link to this heading"></a></h2>
<section id="id1">
<h3>Results and Visualization<a class="headerlink" href="#id1" title="Link to this heading"></a></h3>
<p>The results of the optimization are stored in the directory specified by cfg.dst_path.
For example, it contains visualizations of the density distribution, as well as graphs showing the evolution of various parameters during the optimization process, such as the density field, volume fraction, and sensitivity values.</p>
<a class="reference internal image-reference" href="_images/ex-multi-load-condition.jpg"><img alt="multi-load-condition" class="align-center" src="_images/ex-multi-load-condition.jpg" style="width: 400px;" />
</a>
<a class="reference internal image-reference" href="_images/ex-multi-load-v-50.jpg"><img alt="Multi-Load-condition-Density-Distribution" class="align-center" src="_images/ex-multi-load-v-50.jpg" style="width: 400px;" />
</a>
<video width="640" height="360" controls>
  <source src="_static/animation-box-rho.mp4" type="video/mp4">
  Your browser does not support the video tag.
</video></section>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="installation.html" class="btn btn-neutral float-left" title="Installation" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="theory.html" class="btn btn-neutral float-right" title="Topology Optimization Algorithm Overview" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2025, Kohei Watanabe.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>